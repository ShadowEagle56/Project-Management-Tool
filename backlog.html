<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="CSS/shared.css">
        <link rel="stylesheet" href="CSS/backlog.css">
    </head>
    
    <body onload="loadData();">
        <div class="header">
            <a href="login.html" class="logo">PMT</a>
            <div class="header-right">
                <a class="active" href="backlog.html">Product Backlog</a>
                <a href="sprintList.html">Sprint List</a>
                <a href="memberList.html">Member List</a>
                <img src="Assets/profile.png" class="member-profile" onclick="userProfile()">
            </div>
        </div>

        <div class="backlog-main">
            <div class="container1">
                <button onclick="openFilterPopup()">Filter</button>
                <button onclick="openAddTypePopup()">Add Type</button>
            </div>

            <div class="container2">
                <button class="legend-button" onclick="openLegendPopup()">View Legend</button>
            </div>

            <div class="us-container">
                <div class="container-header">
                    <div>User Story</div>
                    <div>
                        <button class="add" onclick="openAddUSPopup()">&plus;</button>
                    </div>
                </div>

                <div class="us-items" id="us-items"></div>
            </div>

            <div class="task-container">
                <div class="container-header">
                    <div>Product Backlog</div>
                    <div>
                        <button class="add" onclick="openAddTaskPopup()">&plus;</button>
                    </div>
                </div>

                <div class="task-items" id="task-items"></div>
            </div>
        </div>
    </body>

    <div id="overlay"></div>

    <!-- Add User Story Popup -->
    <div class="add-us-popup" id="add-us-popup">
        <div class="add-us-popup-header">
            <div class="popup-title">Add User Story</div>
            <div>
                <button class="close-button" onclick="closeAddUSPopup()">&times;</button>
            </div>
        </div>

        <div class="add-us-popup-body">
            <div class="us-title">Title:</div>
            <div class="us-input">
                <input type="text" placeholder="Title..." id="add-us-title" class="input-text">
            </div>

            <div class="us-title">Priority:</div>
            <div class="us-input">
                <select name="priority-list" id="add-us-priority">
                    <option value="">Select an option</option>
                    <option value="Low">Low</option>
                    <option value="Medium">Medium</option>
                    <option value="High">High</option>
                </select>
            </div>

            <div class="us-title">Description:</div>
            <div class="us-input">
                <textarea placeholder="Description..." id="add-us-description" class="input-text"></textarea>
            </div>
        </div>

        <div class="add-us-submit">
            <button onclick="addUS()">Add User Story</button>
        </div>
    </div>

    <!-- User Story Details Popup -->
    <div class="view-us-popup" id="view-us-popup">
        <div class="view-us-popup-header">
            <div class="popup-title">View User Story</div>
            <div>
                <button class="close-button" onclick="closeViewUSPopup()">&times;</button>
            </div>
        </div>

        <div class="view-us-popup-body">
            <div class="us-title">Title:</div>
            <div class="us-details" id="view-us-title"></div>

            <div class="us-title">Priority:</div>
            <div class="us-details" id="view-us-priority"></div>

            <div class="us-title">Description:</div>
            <div class="us-details" id="view-us-description"></div>
        </div>

        <div class="view-us-button-container" id="view-us-button-container">
            
        </div>
    </div>

    <!-- Edit User Story Popup -->
    <div class="edit-us-popup" id="edit-us-popup">
        <div class="edit-us-popup-header">
            <div class="popup-title">Edit User Story</div>
            <div>
                <button class="close-button" onclick="closeEditUS()">&times;</button>
            </div>
        </div>

        <div class="edit-us-popup-body">
            <div class="us-title">Title:</div>
            <div class="us-input">
                <input type="text" placeholder="Title..." id="edit-us-title" class="input-text">
            </div>

            <div class="us-title">Priority:</div>
            <div class="us-input">
                <select name="priority-list" id="edit-us-priority">
                    <option value="">Select an option</option>
                    <option value="Low">Low</option>
                    <option value="Medium">Medium</option>
                    <option value="High">High</option>
                </select>
            </div>

            <div class="us-title">Description:</div>
            <div class="us-input">
                <textarea placeholder="Description..." id="edit-us-description" class="input-text"></textarea>
            </div>
        </div>

        <div class="edit-us-button-container" id="edit-us-button-container">
            <button>Apply</button>
            <button onclick="closeEditUS()">Cancel</button>
            <button>Delete</button>
        </div>
    </div>

    <!-- Add Task Popup -->
    <div class="add-task-popup" id="add-task-popup">
        <div class="add-task-popup-header">
            <div class="popup-title">Add Task</div>
            <div>
                <button class="close-button" onclick="closeAddTaskPopup()">&times;</button>
            </div>
        </div>

        <div class="add-task-popup-body">
            <div class="task-title">Title:</div>
            <div class="task-input">
                <input type="text" placeholder="Title..." id="add-task-title" class="input-text">
            </div>

            <div class="task-title">Member:</div>
            <div class="task-input">
                <select name="member-list" id="add-task-member">
                    <option value="">Select an option</option>
                </select>
            </div>

            <div class="task-title">Priority:</div>
            <div class="task-input">
                <select name="priority-list" id="add-task-priority">
                    <option value="">Select an option</option>
                    <option value="Low">Low</option>
                    <option value="Medium">Medium</option>
                    <option value="High">High</option>
                </select>
            </div>

            <div class="task-title">Story Point: </div>
            <div class="task-input">
                <input type="number" id="add-task-sp" value="0" class="textbox" min="0">
            </div>

            <div class="task-title">Type:</div>
            <div class="task-input">
                <select name="type-list" id="add-task-type" multiple>
                    <option value="">Select an option</option>
                </select>
            </div>

            <div class="task-title">Description:</div>
            <div class="task-input">
                <textarea placeholder="Description..." id="add-task-description" class="input-text"></textarea>
            </div>
        </div>

        <div class="add-task-submit">
            <button onclick="addTask()">Add Task</button>
        </div>
    </div>

    <!-- Task Details Popup -->
    <div class="view-task-popup" id="view-task-popup">
        <div class="view-task-popup-header">
            <div class="popup-title">View Task</div>
            <div>
                <button class="close-button" onclick="closeViewTaskPopup()">&times;</button>
            </div>
        </div>

        <div class="view-task-popup-body">
            <div class="task-title">Title:</div>
            <div class="task-details" id="view-task-title"></div>

            <div class="task-title">Member:</div>
            <div class="task-details" id="view-task-member"></div>

            <div class="task-title">Priority:</div>
            <div class="task-details" id="view-task-priority"></div>

            <div class="task-title">Story Point: </div>
            <div class="task-details" id="view-task-sp"></div>

            <div class="task-title">Type:</div>
            <div class="task-details" id="view-task-type"></div>

            <div class="task-title">Description:</div>
            <div class="task-details" id="view-task-description"></div>
        </div>

        <div class="view-task-button-container" id="view-task-button-container">
            
        </div>
    </div>

    <!-- Edit Task Popup -->
    <div class="edit-task-popup" id="edit-task-popup">
        <div class="add-task-popup-header">
            <div class="popup-title">Edit Task</div>
            <div>
                <button class="close-button" onclick="closeEditTaskPopup()">&times;</button>
            </div>
        </div>

        <div class="edit-task-popup-body">
            <div class="task-title">Title:</div>
            <div class="task-input">
                <input type="text" placeholder="Title..." id="edit-task-title" class="input-text">
            </div>

            <div class="task-title">Member:</div>
            <div class="task-input">
                <select name="member-list" id="edit-task-member">
                    <option value="">Select an option</option>
                </select>
            </div>

            <div class="task-title">Priority:</div>
            <div class="task-input">
                <select name="priority-list" id="edit-task-priority">
                    <option value="">Select an option</option>
                    <option value="Low">Low</option>
                    <option value="Medium">Medium</option>
                    <option value="High">High</option>
                </select>
            </div>

            <div class="task-title">Story Point: </div>
            <div class="task-input">
                <input type="number" id="edit-task-sp" value="0" class="textbox" min="0">
            </div>

            <div class="task-title">Type:</div>
            <div class="task-input">
                <select name="type-list" id="edit-task-type" multiple>
                    <option value="">Select an option</option>
                </select>
            </div>

            <div class="task-title">Description:</div>
            <div class="task-input">
                <textarea placeholder="Description..." id="edit-task-description" class="input-text"></textarea>
            </div>
        </div>

        <div class="edit-task-submit" id="edit-task-submit">
        </div>
    </div>

    <!-- Filter Popup -->
    <div class="filter-popup" id="filter-popup">
        <div class="filter-popup-header">
            <div class="popup-title">Filter</div>
            <div>
                <button class="close-button" onclick="closeFilterPopup()">&times;</button>
            </div>
        </div>

        <div class="filter-popup-body">
            <div class="filter-title">Priority:</div>
            <div class="filter-input">
                <select name="priority-list" id="filter-priority">
                    <option value="">Select an option</option>
                    <option value="Low">Low</option>
                    <option value="Medium">Medium</option>
                    <option value="High">High</option>
                </select>
            </div>
            <div class="type-title">Type:</div>
                <div class="filter-input">
                    <select name="type-list" id="filter-type" multiple>
                        <option value="">Select an option</option>
                    </select>
                </div>
        </div>

        <div class="filter-submit">
            <button onclick="filter()">Filter</button>
        </div>
    </div>

    <!-- Add Type Popup -->
    <div class="add-type-popup" id="add-type-popup">
        <div class="add-type-popup-header">
            <div class="popup-title">Add Type</div>
            <div>
                <button class="close-button" onclick="closeAddTypePopup()">&times;</button>
            </div>
        </div>

        <div class="add-type-popup-body">
            <div class="type-title">Type Name:</div>
            <div class="type-input">
                <input type="text" placeholder="Title..." id="add-type-title" class="input-text">
            </div>
            <div class="type-title">Type Colour:</div>
            <div class="type-input">
                <input type="color" id="type-colour" name="type-colour" value="#000000" class="type-colour-preview">
            </div>
        </div>

        <div class="add-type-submit">
            <button onclick="addType()">Add Type</button>
        </div>
    </div>

    <!-- View Legend Popup -->
    <div class="legend-popup" id="legend-popup">
        <div class="legend-popup-header">
            <div class="popup-title">View Legend</div>
            <div>
                <button class="close-button" onclick="closeLegendPopup()">&times;</button>
            </div>
        </div>

        <div class="legend-popup-body">
            <div class="legend-title">Priority:</div>
            <div class="legend-container">
                <div class="legend-pair">
                    <div class="legend-name">Low</div>
                    <div class="legend-color" style="background-color: rgb(152,251,152);"></div>
                </div>
                <div class="legend-pair">
                    <div class="legend-name">Medium</div>
                    <div class="legend-color" style="background-color: rgb(255,250,205);"></div>
                </div>
                <div class="legend-pair">
                    <div class="legend-name">High</div>
                    <div class="legend-color" style="background-color: rgb(240,128,128);"></div>
                </div>
            </div>
            <div class="legend-title">Type:</div>
            <div class="legend-container" id="legend-type">
            </div>
        </div>
    </div>


    <script src="JS/shared.js"></script>
    <script src="JS/backlog.js"></script>
</html>